# 保险产品RAG问答策略方案

## 1. 方案概述

### 1.1 核心目标
基于两份保险产品PDF文档（AIA FlexiAchiever和RoyalFortune），构建一个精准、可追溯的保险产品信息提取与问答系统，准确回答待回答问题.md中的34个结构化问题。

### 1.2 关键挑战
- **多语言文档处理**：中文（繁体）和英文PDF混合
- **结构化信息提取**：需要精确定位具体数值、条款和特性
- **专业术语理解**：保险产品特有的术语和概念
- **信息完整性验证**：确保提取信息的准确性和完整性

## 2. 技术架构设计

### 2.1 文档处理流程
```
PDF文档 → OCR/文本提取 → 文档分块 → 向量化索引 → 检索系统 → 答案生成
```

### 2.2 核心模块

#### 2.2.1 文档预处理模块
- **PDF解析**：提取文本、表格、图表信息
- **语言识别**：区分中英文内容
- **文档分块策略**：
  - 按章节/标题层级分块
  - 保留上下文信息（前后段落关联）
  - 表格数据特殊处理

#### 2.2.2 智能检索系统
- **混合检索策略**：
  - 关键词检索（BM25）：精确匹配产品名称、金额、比率等
  - 语义检索（向量）：理解问题意图和相关概念
  - 元数据过滤：按文档来源、章节类型筛选

#### 2.2.3 信息提取引擎
- **实体识别**：
  - 保险公司名称
  - 产品名称和类型
  - 金额和百分比
  - 年龄和期限
  - 货币类型
- **结构化映射**：将提取信息映射到34个问题的答案格式

#### 2.2.4 答案验证系统
- **交叉验证**：从多处文档位置验证同一信息
- **完整性检查**：确保必填字段都有答案
- **一致性验证**：检查相关字段的逻辑一致性

## 3. 问题分类与处理策略

### 3.1 问题分类
根据待回答问题的34个项目，分为以下类别：

#### A类：基础产品信息（10项）
- Insurer Entity Name
- Product Name
- Product Type
- Policy Currency
等

**处理策略**：通常在文档首页或产品概览部分，使用精确匹配

#### B类：数值参数（8项）
- Minimum/Maximum Premium
- Issue Age
- Policy Term
- Premium Terms
等

**处理策略**：重点检索表格、列表和数值描述段落

#### C类：产品特性（10项）
- Withdrawal Features
- Death Settlement Features
- Change of Life Assured Features
- Additional Benefits
等

**处理策略**：需要理解长文本描述，可能分散在多个章节

#### D类：技术细节（6项）
- GCV percentages
- Surrender Value Components
- Non-Medical Limits
- Contract Governing Law
等

**处理策略**：通常在附录、条款细则或技术说明部分

### 3.2 检索优先级设置
1. **高优先级**：产品名称、保险公司、基础参数
2. **中优先级**：产品特性、收益说明
3. **低优先级**：法律条款、附加说明

## 4. 实施步骤

### 4.1 第一阶段：文档处理（2天）
- [ ] PDF文本提取和OCR处理
- [ ] 文档结构化分析
- [ ] 创建文档索引数据库

### 4.2 第二阶段：检索系统构建（3天）
- [ ] 实现BM25关键词检索
- [ ] 部署向量检索模型
- [ ] 构建混合检索管道

### 4.3 第三阶段：答案生成（2天）
- [ ] 开发信息提取规则
- [ ] 实现结构化输出格式
- [ ] 答案模板填充系统

### 4.4 第四阶段：验证优化（1天）
- [ ] 答案准确性验证
- [ ] 缺失信息补充
- [ ] 输出格式调整

## 5. 质量保证措施

### 5.1 准确性保证
- **双重验证**：每个答案至少从两处文档位置验证
- **人工抽检**：关键数值和条款进行人工核对
- **引用追踪**：每个答案附带原文引用位置

### 5.2 完整性保证
- **覆盖率检查**：确保34个问题都有对应答案
- **默认值处理**：明确标识无法找到的信息
- **补充说明**：对模糊或不确定的信息添加说明

### 5.3 可追溯性
```json
{
  "question": "Product Name",
  "answer": "FlexiAchiever Savings Plan",
  "source": {
    "document": "AIA_FlexiAchiever_tc.pdf",
    "page": 1,
    "section": "产品概览",
    "confidence": 0.95
  },
  "extraction_method": "exact_match"
}
```

## 6. 预期输出格式

### 6.1 标准答案模板
```markdown
### Product Information
- **Insurer Entity Name**: AIA International Limited
  - Source: Page 1, Cover Page
  - Confidence: High
  
- **Product Name**: FlexiAchiever Savings Plan / 活享储蓄计划
  - Source: Page 1, Product Title
  - Confidence: High

[... 继续其他32个问题 ...]
```

### 6.2 无法确定的答案处理
- 标记为 `[Information Not Found]`
- 提供可能的原因说明
- 建议人工复核的优先级

## 7. 技术栈建议

### 7.1 核心技术
- **PDF处理**：PyPDF2, pdfplumber（表格提取）
- **OCR**：Tesseract（备用）
- **检索引擎**：Elasticsearch或向量数据库（Pinecone/Weaviate）
- **LLM**：GPT-4或Claude（信息提取和理解）

### 7.2 辅助工具
- **文档解析**：LangChain Document Loaders
- **向量化**：OpenAI Embeddings或专业金融embedding模型
- **结构化输出**：Pydantic模型验证

## 8. 风险控制

### 8.1 潜在风险
- PDF解析不完整（扫描件质量问题）
- 中英文混合导致的理解偏差
- 保险术语的专业性理解

### 8.2 应对措施
- 建立保险术语词典
- 人工预审文档质量
- 设置置信度阈值，低于阈值的答案需人工确认

## 9. 总结

本方案通过结合RAG技术和结构化信息提取，能够：
1. 准确提取两份保险产品PDF中的关键信息
2. 系统化回答34个结构化问题
3. 提供可追溯、可验证的答案来源
4. 确保输出的准确性和完整性

通过分阶段实施和质量保证措施，预计能够在1周内完成系统搭建并输出高质量的结构化答案。